!function i(l,a,s){function c(t,e){if(!a[t]){if(!l[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=a[t]={exports:{}};l[t][0].call(r.exports,function(e){return c(l[t][1][e]||e)},r,r.exports,i,l,a,s)}return a[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)c(s[e]);return c}({1:[function(e,t,n){t.exports={sm:480,md:1024,lg:1200,xl:1600,xxl:2e3}},{}],2:[function(require,module,exports){"use strict";var _utils=require("./utils"),_menu=_interopRequireDefault(require("./components/menu")),_scrollController=_interopRequireDefault(require("./components/scroll-controller")),_toggleButton=_interopRequireDefault(require("./components/toggle-button"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var App={components:[_menu.default,_scrollController.default,_toggleButton.default]};!function(){document.querySelectorAll("[data-component]").forEach(function(el){var names=el.getAttribute("data-component").split(",");names.forEach(function(name){var component=App.components.find(function(e){return e.componentName===name});if(!component)return console.error('[App] Component "'.concat(name,'" is not defined')),!1;var existing=(0,_utils.getData)(el)&&(0,_utils.getData)(el).loadedComponents;if(existing||(existing=[],(0,_utils.setData)(el,{loadedComponents:existing})),name in(0,_utils.getData)(el).loadedComponents)console.debug('[App] Component "'.concat(name,'" already loaded'));else{var options;try{options=eval("("+el.getAttribute("data-component-options")+")")||{}}catch(e){options={}}var Constructor=component,obj=new Constructor(el,options);existing.push(name),(0,_utils.setData)(el,{component:obj}),console.debug('[App] Component "'.concat(name,'" loaded.'))}})})}()},{"./components/menu":3,"./components/scroll-controller":4,"./components/toggle-button":5,"./utils":9}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,r,i=e("../decorators"),l=e("../utils"),a=(o=e("./scroll-controller"))&&o.__esModule?o:{default:o};var s=(0,i.component)("menu")(r=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=(0,l.findComponent)(a.default);if(n){var o=t.querySelectorAll('a[href^="#"]');n.bindAnchors(o)}})||r;n.default=s},{"../decorators":6,"../utils":9,"./scroll-controller":4}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _decorators=require("../decorators"),_scrollmagic=_interopRequireDefault(require("scrollmagic"));require("scrollmagic/scrollmagic/uncompressed/plugins/debug.addIndicators"),require("scrollmagic/scrollmagic/uncompressed/plugins/animation.gsap");var _controller=_interopRequireDefault(require("../scroll/controller")),_scene=_interopRequireDefault(require("../scroll/scene")),_utils=require("../utils"),_breakpoints=_interopRequireDefault(require("../../breakpoints")),_gsap=require("gsap"),_dec,_class;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var ScrollController=(_dec=(0,_decorators.component)("scrollController"),_dec(_class=function(){function ScrollController(e){var n=this;_classCallCheck(this,ScrollController),this.element=e,this.content=this.element.children[0],this.smoothScrolling=!1,this.parallaxScenes=[],this.parallaxListeners=[],this.controller=new _controller.default({container:this.element,smoothScrolling:this.smoothScrolling,addIndicators:!0}),new _utils.BreakpointListener(function(e){var t=e.screenSize;e.hasChanged&&(n.smoothScrolling&&("xs"===t?n.controller.initCommonScrolling():n.controller.initSmoothScrolling()),console.log("[ScrollController] Screen size has changed. Rebuiling scenes for:",t),n.rebuild())},_breakpoints.default)}return _createClass(ScrollController,[{key:"rebuild",value:function(){var e=this;setTimeout(function(){e.resetScenes(),e.buildParallaxScenes()},0)}},{key:"buildParallaxScenes",value:function buildParallaxScenes(){var _this3=this,updateItems=function(e,t){e.forEach(function(e){0<e.momentum?_gsap.TweenMax.to(e.element,e.momentum,{y:t/e.speed,ease:e.ease}):_gsap.TweenMax.set(e.element,{y:t/e.speed})})},parallaxElements=function(){var result=[],elements=_this3.element.querySelectorAll("[data-parallax]");return elements.forEach(function(element){var isEnabled=eval(_this3.getParallaxProperty(element,"enabled",!0));if(isEnabled){var speed=_this3.getParallaxProperty(element,"speed",1),momentum=_this3.getParallaxProperty(element,"momentum",.3),ease=eval(_this3.getParallaxProperty(element,"ease","Power0.easeNone"));result.push({element:element,speed:speed,momentum:momentum,ease:ease})}else _gsap.TweenMax.set(element,{clearProps:"all"})}),result}();if(0<parallaxElements.length)if(this.controller.hasSmoothScrolling()){var listener=function(e){return updateItems(parallaxElements,e.offset.y)};this.parallaxListeners.push(listener),this.controller.addScrollbarListener(listener)}else{var scene=new _scene.default({triggerElement:this.content,triggerHook:"onLeave",duration:this.content.offsetHeight}).on("update",function(e){return updateItems(parallaxElements,e.scrollPos)});this.parallaxScenes.push(scene),this.controller.addScene(scene)}}},{key:"resetScenes",value:function(){var t=this;this.parallaxScenes.forEach(function(e){return t.controller.removeScene(e)}),this.parallaxScenes=[],this.parallaxListeners.forEach(function(e){return t.controller.removeScrollbarListener(e)}),this.parallaxListeners=[]}},{key:"bindAnchors",value:function(e){this.controller.bindAnchors(e)}},{key:"toggleSmoothScrolling",value:function(){this.controller.hasSmoothScrolling()?(this.controller.initCommonScrolling(),this.smoothScrolling=!1):(this.controller.initSmoothScrolling(),this.smoothScrolling=!0),console.log("[ScrollController] Scrolling has changed, rebuilding scenes."),this.rebuild()}},{key:"hasSmoothScrolling",value:function(){return this.controller.hasSmoothScrolling()}},{key:"getParallaxProperty",value:function(e,t,n){return this.getDataProperty("parallax",e,t,n)}},{key:"getAnimationProperty",value:function(e,t,n){return this.getDataProperty("animate",e,t,n)}},{key:"getSceneProperty",value:function(e,t,n){return this.getDataProperty("scene",e,t,n)}},{key:"getDataProperty",value:function(e,t,n,o){var r=window.innerWidth,i=n===e?e:"".concat(e,"-").concat(n);return r<_breakpoints.default.sm?t.getAttribute("data-xs-".concat(i))||t.getAttribute("data-".concat(i))||o:r<_breakpoints.default.md?t.getAttribute("data-sm-".concat(i))||t.getAttribute("data-xs-".concat(i))||t.getAttribute("data-".concat(i))||o:r<_breakpoints.default.lg?t.getAttribute("data-md-".concat(i))||t.getAttribute("data-sm-".concat(i))||t.getAttribute("data-xs-".concat(i))||t.getAttribute("data-".concat(i))||o:r<_breakpoints.default.xl?t.getAttribute("data-lg-".concat(i))||t.getAttribute("data-md-".concat(i))||t.getAttribute("data-sm-".concat(i))||t.getAttribute("data-xs-".concat(i))||t.getAttribute("data-".concat(i))||o:r<_breakpoints.default.xxl?t.getAttribute("data-xl-".concat(i))||t.getAttribute("data-lg-".concat(i))||t.getAttribute("data-md-".concat(i))||t.getAttribute("data-sm-".concat(i))||t.getAttribute("data-xs-".concat(i))||t.getAttribute("data-".concat(i))||o:t.getAttribute("data-xxl-".concat(i))||t.getAttribute("data-xl-".concat(i))||t.getAttribute("data-lg-".concat(i))||t.getAttribute("data-md-".concat(i))||t.getAttribute("data-sm-".concat(i))||t.getAttribute("data-xs-".concat(i))||t.getAttribute("data-".concat(i))||o}}]),ScrollController}())||_class),_default=ScrollController;exports.default=_default},{"../../breakpoints":1,"../decorators":6,"../scroll/controller":7,"../scroll/scene":8,"../utils":9,gsap:"gsap",scrollmagic:"scrollmagic","scrollmagic/scrollmagic/uncompressed/plugins/animation.gsap":"scrollmagic/scrollmagic/uncompressed/plugins/animation.gsap","scrollmagic/scrollmagic/uncompressed/plugins/debug.addIndicators":"scrollmagic/scrollmagic/uncompressed/plugins/debug.addIndicators"}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,r,i=e("../decorators"),l=e("../utils"),a=(o=e("./scroll-controller"))&&o.__esModule?o:{default:o};function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var c=(0,i.component)("toggleButton")(r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.element.addEventListener("click",this.toggle.bind(this)),this.updateState()}return function(e,t,n){t&&s(e.prototype,t),n&&s(e,n)}(t,[{key:"toggle",value:function(){var e=(0,l.findComponent)(a.default);e&&(e.toggleSmoothScrolling(),this.updateState())}},{key:"updateState",value:function(){var e=(0,l.findComponent)(a.default);e&&(e.hasSmoothScrolling()?(this.element.querySelector("span").innerText="On",this.element.querySelector("span").classList.remove("off"),this.element.querySelector("span").classList.add("on")):(this.element.querySelector("span").innerText="Off",this.element.querySelector("span").classList.remove("on"),this.element.querySelector("span").classList.add("off")))}}]),t}())||r;n.default=c},{"../decorators":6,"../utils":9,"./scroll-controller":4}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.component=function(t){return function(e){e.componentName=t}}},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=l(e("smooth-scrollbar")),r=l(e("scrollmagic"));e("scrollmagic/scrollmagic/uncompressed/plugins/debug.addIndicators"),e("scrollmagic/scrollmagic/uncompressed/plugins/animation.gsap"),e("gsap/ScrollToPlugin");var i=l(e("./scene"));function l(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e.container||window,this.options=e,this._scenes=[],this._scrollbarListeners=[],this.options.smoothScrolling?this.initSmoothScrolling():this.initCommonScrolling()}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(t,[{key:"initCommonScrolling",value:function(){this._removeAllScenes(),this._destroyController(),this._smoothScrolling=!1,delete this.options.smoothScrolling,this.controller=new r.default.Controller(this.options),this.controller.scrollTo(function(e){TweenMax.to(this,2,{scrollTo:{y:e},ease:Power4.easeOut})}),this._removeScrollbars(),this._addAllScenes(),console.debug("[Controller] Created common scrolling")}},{key:"initSmoothScrolling",value:function(){this._removeAllScenes(),this._destroyController(),this._smoothScrolling=!0,delete this.options.smoothScrolling,this.controller=new r.default.Controller(Object.assign(this.options,{refreshInterval:0})),this._createScrollbars(),this._addAllScenes(),console.debug("[Controller] Created smooth scrolling")}},{key:"bindAnchors",value:function(e){var o=this;e.forEach(function(e){e.addEventListener("click",function(e){var t=e.currentTarget.getAttribute("href");if(0<t.length)if(e.preventDefault(),o.hasSmoothScrolling()){var n=o.element.querySelector(t);n&&o._scrollbar.scrollIntoView(n)}else o.controller.scrollTo(t)});var t=e.getAttribute("href"),n=o.element.querySelector(t);o.addScene(new i.default({triggerElement:n,triggerHook:"onLeave",duration:n.offsetHeight}).on("enter",function(){return e.classList.add("is-active")}).on("leave",function(){return e.classList.remove("is-active")}))})}},{key:"addScene",value:function(e){e.addTo(this),this._scenes.push(e)}},{key:"removeScene",value:function(t){t.remove(),this._scenes=this._scenes.filter(function(e){return e!==t})}},{key:"addScrollbarListener",value:function(e){this._scrollbar&&(this._scrollbar.addListener(e),this._scrollbarListeners.push(e))}},{key:"removeScrollbarListener",value:function(t){this._scrollbar&&(this._scrollbar.removeListener(t),this._scrollbarListeners=this._scrollbarListeners.filter(function(e){return e!==t}))}},{key:"hasSmoothScrolling",value:function(){return this._smoothScrolling}},{key:"_createScrollbars",value:function(){var e=this;this._scrollbar=o.default.init(this.element,{damping:.05}),this.addScrollbarListener(function(){return e._scenes.forEach(function(e){return e.refresh()})})}},{key:"_removeScrollbars",value:function(){var t=this;this._scrollbar&&(this._scrollbarListeners.forEach(function(e){return t._scrollbar.removeListener(e)}),this._scrollbarListeners=[],this._scrollbar.destroy())}},{key:"_addAllScenes",value:function(){var t=this;this._scenes.forEach(function(e){return e.addTo(t)})}},{key:"_removeAllScenes",value:function(){this._scenes.forEach(function(e){return e.remove()})}},{key:"_destroyController",value:function(){this.controller&&(this.hasSmoothScrolling()?console.debug("[Controller] Removed smooth scrolling"):console.debug("[Controller] Removed common scrolling"),this.controller.destroy(!0))}}]),t}();n.default=s},{"./scene":8,"gsap/ScrollToPlugin":"gsap/ScrollToPlugin",scrollmagic:"scrollmagic","scrollmagic/scrollmagic/uncompressed/plugins/animation.gsap":"scrollmagic/scrollmagic/uncompressed/plugins/animation.gsap","scrollmagic/scrollmagic/uncompressed/plugins/debug.addIndicators":"scrollmagic/scrollmagic/uncompressed/plugins/debug.addIndicators","smooth-scrollbar":"smooth-scrollbar"}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,r=(o=e("scrollmagic"))&&o.__esModule?o:{default:o};function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var l=function(){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.controller=null,this.scene=new r.default.Scene(this.options),this}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"setTween",value:function(e,t,n){return 1<arguments.length&&(arguments.length<3&&(n=t,t=1),e=TweenMax.to(e,t,n)),this.scene.setTween(e),this}},{key:"setClassToggle",value:function(e,t){return this.scene.setClassToggle(e,t),this}},{key:"setPin",value:function(e){return this.pinnedElement=e,this}},{key:"on",value:function(e,t){return this.scene.on(e,t),this}},{key:"addIndicators",value:function(e){return this.scene.addIndicators(e),this}},{key:"addTo",value:function(e){return this.controller=e,this.scene.addTo(e.controller),this}},{key:"remove",value:function(){return this.scene.remove(),this.controller=null,this}},{key:"triggerElement",value:function(e){return this.scene.triggerElement(e),this}},{key:"duration",value:function(e){return this.scene.duration(e),this}},{key:"refresh",value:function(){return this.scene.refresh(),this}}]),t}();n.default=l},{scrollmagic:"scrollmagic"}],9:[function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.getData=l,n.setData=function(e,t){i.set(e,t)},n.getComponent=function(e){return l(e).component},n.findComponent=function(e){var t=l(document.querySelector('[data-component="'.concat(e.componentName,'"]')));return t?t.component:void console.error("[App] Couldn't find instance of ".concat(e.componentName," component. Check declaration order."))},n.whichAnimationEvent=function(){var e,t=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in n)if(void 0!==t.style[e])return n[e]},n.whichTransitionEvent=function(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]},n.getRandom=function(e,t){return Math.random()*(t-e)+e},n.Timer=n.BreakpointListener=void 0;var o,r,i=window.WeakMap?new WeakMap:(o=0,r={},{set:function(e,t){var n;void 0===e.myCustomDataTag&&(n=o++,e.myCustomDataTag=n),r[n]=t},get:function(e){return r[e.myCustomDataTag]}});function l(e){return i.get(e)}n.BreakpointListener=function e(i,l){var a=this;s(this,e),this.screenSize=null,this.windowWidth=window.innerWidth,this.timeout=null,this.checkView=function(){for(var e=Object.keys(l),t=e.slice(-1)[0],n=e.length-1;0<=n;n--){var o=l[e[n]];a.windowWidth<o&&(t=e[n-1]||"xs")}var r=a.screenSize!==t;a.screenSize=t,i({screenSize:a.screenSize,hasChanged:r})},this.listener=function(){a.windowWidth!==window.innerWidth&&(a.windowWidth=window.innerWidth,a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.checkView,250))},window.addEventListener("resize",this.listener),this.checkView()};n.Timer=function e(t,n){s(this,e);var o,r,i=n;this.pause=function(){window.clearTimeout(o),i-=new Date-r};this.resume=function e(){r=new Date,o=window.setTimeout(function(){i=n,e(),t()},i)},this.reset=function(){i=n},this.resume()}},{}]},{},[2]);
//# sourceMappingURL=scripts.min.js.map
