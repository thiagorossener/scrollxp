{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/app.js","src/js/components/menu.js","src/js/components/scroll-controller.js","src/js/components/toggle-button.js","src/js/decorators.js","src/js/scroll/controller.js","src/js/scroll/scene.js","src/js/utils.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_utils","_menu","_interopRequireDefault","_scrollController","_toggleButton","App","components","document","querySelectorAll","forEach","el","names","getAttribute","split","name","component","find","componentName","console","error","concat","existing","getData","loadedComponents","setData","debug","options","eval","ex","Constructor","obj","push","_decorators","Menu","element","_classCallCheck","this","scrollController","findComponent","anchors","bindAnchors","_controller","_scene","ScrollController","controller","container","smoothScrolling","addIndicators","addScene","triggerElement","duration","setTween","x","hasSmoothScrolling","initCommonScrolling","initSmoothScrolling","ToggleButton","addEventListener","toggle","bind","updateState","toggleSmoothScrolling","querySelector","innerText","classList","remove","add","target","_smoothScrollbar","_scrollmagic","Controller","window","scenes","log","_removeAllScenes","_destroyController","scrollTo","newPos","TweenMax","to","y","ease","Power4","easeOut","_removeScrollbars","_addAllScenes","Object","assign","refreshInterval","_createScrollbars","_this","anchor","id","currentTarget","preventDefault","scrollbar","scrollIntoView","section","triggerHook","offsetHeight","on","scene","addTo","filter","current","init","damping","addListener","_refreshScenes","removeListener","destroy","_this2","refresh","Scene","tween","params","arguments","classes","setClassToggle","pinnedElement","callback","newTriggerElement","newDuration","data","set","domElement","componentClass","createElement","animations","animation","OAnimation","MozAnimation","WebkitAnimation","undefined","style","transitions","transition","OTransition","MozTransition","WebkitTransition","min","max","Math","random","lastId","store","WeakMap","info","myCustomDataTag","get","BreakpointListener","breakpoints","screenSize","windowWidth","innerWidth","timeout","checkView","keys","slice","value","hasChanged","listener","clearTimeout","setTimeout","Timer","delay","timerId","start","remaining","pause","Date","resume","reset"],"mappings":"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","file":"scripts.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import { getData, setData } from './utils';\n\nimport Menu from './components/menu';\nimport ScrollController from './components/scroll-controller';\nimport ToggleButton from './components/toggle-button';\n\n\nlet App = {\n  components: [\n    Menu,\n    ScrollController,\n    ToggleButton\n  ]\n};\n\n(() => {\n  // Bind components\n  document.querySelectorAll('[data-component]').forEach(el => {\n    let names = el.getAttribute('data-component').split(',');\n    names.forEach(name => {\n      let component = App.components.find(c => c.componentName === name);\n      if (!component) {\n        console.error(`[App] Component \"${name}\" is not defined`);\n        return false;\n      } else {\n        let existing = getData(el) && getData(el).loadedComponents;\n        if (!existing) {\n          existing = [];\n          setData(el, { loadedComponents: existing })\n        }\n        if (!(name in getData(el).loadedComponents)) {\n          let options;\n          try {\n            options = eval('(' + el.getAttribute('data-component-options') + ')') || {};\n          } catch (ex) {\n            options = {};\n          }\n          let Constructor = component;\n          let obj = new Constructor(el, options);\n          existing.push(name);\n          setData(el, { component: obj })\n          console.debug(`[App] Component \"${name}\" loaded.`);\n        } else {\n          console.debug(`[App] Component \"${name}\" already loaded`);\n        }\n      }\n    });\n  });\n})();\n","import { component } from '../decorators';\nimport { findComponent } from '../utils';\nimport ScrollController from './scroll-controller';\n\n\n@component('menu')\nclass Menu {\n  constructor(element) {\n    const scrollController = findComponent(ScrollController);\n    if (scrollController) {\n      const anchors = element.querySelectorAll('a[href^=\"#\"]');\n      scrollController.bindAnchors(anchors);\n    }\n  }\n};\n\nexport default Menu;\n","import { component } from '../decorators';\n\nimport ScrollMagic from 'scrollmagic';\nimport 'scrollmagic/scrollmagic/uncompressed/plugins/debug.addIndicators';\nimport 'scrollmagic/scrollmagic/uncompressed/plugins/animation.gsap';\n\n\nimport Controller from '../scroll/controller';\nimport Scene from '../scroll/scene';\n\n\n@component('scrollController')\nclass ScrollController {\n  constructor(element) {\n    this.controller = new Controller({\n      container: element,\n      smoothScrolling: false,\n      addIndicators: true\n    });\n\n    this.controller.addScene(\n      new Scene({\n        triggerElement: '#section1',\n        duration: '100%'\n      })\n      .setTween('.square', {\n        x: 200\n      })\n    );\n  }\n\n  bindAnchors(anchors) {\n    this.controller.bindAnchors(anchors);\n  }\n\n  toggleSmoothScrolling() {\n    if (this.controller.hasSmoothScrolling()) {\n      this.controller.initCommonScrolling();\n    } else {\n      this.controller.initSmoothScrolling();\n    }\n  }\n\n  hasSmoothScrolling() {\n    return this.controller.hasSmoothScrolling();\n  }\n};\n\nexport default ScrollController;\n","import { component } from '../decorators';\nimport { findComponent } from '../utils';\nimport ScrollController from './scroll-controller';\n\n\n@component('toggleButton')\nclass ToggleButton {\n  constructor(element) {\n    this.element = element;\n\n    this.element.addEventListener('click', this.toggle.bind(this));\n    this.updateState();\n  }\n\n  toggle() {\n    const scrollController = findComponent(ScrollController);\n    if (scrollController) {\n      scrollController.toggleSmoothScrolling();\n      this.updateState();\n    }\n  }\n\n  updateState() {\n    const scrollController = findComponent(ScrollController);\n    if (scrollController) {\n      const hasSmoothScrolling = scrollController.hasSmoothScrolling();\n      if (hasSmoothScrolling) {\n        this.element.querySelector('span').innerText = 'On';\n        this.element.querySelector('span').classList.remove('off');\n        this.element.querySelector('span').classList.add('on');\n      } else {\n        this.element.querySelector('span').innerText = 'Off';\n        this.element.querySelector('span').classList.remove('on');\n        this.element.querySelector('span').classList.add('off');\n      }\n    }\n  }\n};\n\nexport default ToggleButton;\n","export function component(name) {\n  return function (target) {\n    target.componentName = name;\n  }\n}\n","import Scrollbar from 'smooth-scrollbar';\nimport ScrollMagic from 'scrollmagic';\nimport 'scrollmagic/scrollmagic/uncompressed/plugins/debug.addIndicators';\nimport 'scrollmagic/scrollmagic/uncompressed/plugins/animation.gsap';\nimport 'gsap/ScrollToPlugin';\n\nimport Scene from './scene';\n\n\nclass Controller {\n  constructor(options) {\n    this.element = options.container || window;\n    this.options = options;\n\n    this.scenes = [];\n\n    if (this.options.smoothScrolling) {\n      this.initSmoothScrolling();\n    } else {\n      this.initCommonScrolling();\n    }\n  }\n\n  initCommonScrolling() {\n    console.log('[Controller] Removed smooth scrolling');\n\n    this.smoothScrolling = false;\n\n    this._removeAllScenes();\n    this._destroyController();\n\n    delete this.options.smoothScrolling;\n\n    this.controller = new ScrollMagic.Controller(this.options);\n\n    this.controller.scrollTo(function (newPos) {\n      TweenMax.to(this, 2, {\n        scrollTo: {\n          y: newPos\n        },\n        ease: Power4.easeOut\n      });\n    });\n\n    this._removeScrollbars();\n    this._addAllScenes();\n  }\n\n  initSmoothScrolling() {\n    console.log('[Controller] Added smooth scrolling');\n\n    this.smoothScrolling = true;\n\n    this._removeAllScenes();\n    this._destroyController();\n\n    delete this.options.smoothScrolling;\n\n    this.controller = new ScrollMagic.Controller(Object.assign(this.options, { refreshInterval: 0 }));\n  \n    this._createScrollbars();\n    this._addAllScenes();\n  }\n\n  bindAnchors(anchors) {\n    anchors.forEach(anchor => {\n      // Bind scroll to anchor\n      anchor.addEventListener('click', e => {\n        const id = e.currentTarget.getAttribute('href');\n        if (id.length > 0) {\n          e.preventDefault();\n\n          if (this.hasSmoothScrolling()) {\n            const element = this.element.querySelector(id);\n            if (element) {\n              this.scrollbar.scrollIntoView(element);\n            }\n          } else {\n            this.controller.scrollTo(id);\n          }\n        }\n      });\n      // Bind anchor to scroll\n      const id = anchor.getAttribute('href');\n      const section = this.element.querySelector(id);\n      this.addScene(\n        new Scene({\n          triggerElement: section,\n          triggerHook: 'onLeave',\n          duration: section.offsetHeight\n        })\n        .on('enter', () => anchor.classList.add('is-active'))\n        .on('leave', () => anchor.classList.remove('is-active'))\n      );\n    });\n  }\n\n  addScene(scene) {\n    scene.addTo(this);\n\n    this.scenes.push(scene);\n  }\n\n  removeScene(scene) {\n    scene.remove();\n\n    this.scenes = this.scenes.filter(function (current) {\n      return current !== scene;\n    });\n  }\n\n  hasSmoothScrolling() {\n    return this.smoothScrolling;\n  }\n\n  _createScrollbars() {\n    this.scrollbar = Scrollbar.init(this.element, {\n      damping: 0.05\n    });\n\n    this.scrollbar.addListener(this._refreshScenes.bind(this));\n  }\n\n  _removeScrollbars() {\n    if (this.scrollbar) {\n      this.scrollbar.removeListener(this._refreshScenes.bind(this));\n      this.scrollbar.destroy();\n    }\n  }\n\n  _addAllScenes() {\n    this.scenes.forEach(scene => scene.addTo(this));\n  }\n\n  _removeAllScenes() {\n    this.scenes.forEach(scene => scene.remove());\n  }\n\n  _refreshScenes() {\n    this.scenes.forEach(scene => scene.refresh());\n  }\n\n  _destroyController() {\n    if (this.controller) {\n      this.controller.destroy(true);\n    }\n  }\n};\n\nexport default Controller;\n","import ScrollMagic from 'scrollmagic';\n\n\nclass Scene {\n  constructor(options) {\n    this.options = options;\n\n    this.controller = null;\n\n    this.scene = new ScrollMagic.Scene(this.options);\n\n    return this;\n  }\n\n  setTween(tween, duration, params) {\n    if (arguments.length > 1) {\n      if (arguments.length < 3) {\n        params = duration;\n        duration = 1;\n      }\n      tween = TweenMax.to(tween, duration, params);\n    }\n    this.scene.setTween(tween);\n    return this;\n  }\n\n  setClassToggle(element, classes) {\n    this.scene.setClassToggle(element, classes);\n    return this;\n  }\n\n  setPin(element) {\n    this.pinnedElement = element;\n    return this;\n  }\n\n  on(names, callback) {\n    this.scene.on(names, callback);\n    return this;\n  }\n\n  addIndicators(options) {\n    this.scene.addIndicators(options);\n    return this;\n  }\n\n  addTo(controller) {\n    this.controller = controller;\n    this.scene.addTo(controller.controller);\n    return this;\n  }\n\n  remove() {\n    this.scene.remove();\n    this.controller = null;\n    return this;\n  }\n\n  triggerElement(newTriggerElement) {\n    this.scene.triggerElement(newTriggerElement);\n    return this;\n  }\n\n  duration(newDuration) {\n    this.scene.duration(newDuration);\n    return this;\n  }\n\n  refresh() {\n    this.scene.refresh();\n    return this;\n  }\n};\n\nexport default Scene;\n","// Based on utils from https://blog.garstasio.com/you-dont-need-jquery/utils/\nconst data = window.WeakMap ? new WeakMap() : (function () {\n  let lastId = 0,\n      store = {};\n\n  return {\n      set: function(element, info) {\n          let id;\n          if (element.myCustomDataTag === undefined) {\n              id = lastId++;\n              element.myCustomDataTag = id;\n          }\n          store[id] = info;\n      },\n      get: function(element) {\n        return store[element.myCustomDataTag];\n      }\n  };\n}());\n\nexport function getData(el) {\n  return data.get(el);\n};\n\nexport function setData(el, obj) {\n  data.set(el, obj);\n};\n\nexport function getComponent(domElement) {\n  return getData(domElement).component;\n};\n\nexport function findComponent(componentClass) {\n  const obj = getData(document.querySelector(`[data-component=\"${componentClass.componentName}\"]`));\n  if (!obj) {\n    console.error(`[App] Couldn\\'t find instance of ${componentClass.componentName} component. Check declaration order.`);\n    return;\n  }\n  return obj.component;\n};\n\n// https://davidwalsh.name/css-animation-callback\nexport function whichAnimationEvent() {\n  let t,\n      el = document.createElement('fakeelement');\n\n  let animations = {\n    'animation': 'animationend',\n    'OAnimation': 'oAnimationEnd',\n    'MozAnimation': 'animationend',\n    'WebkitAnimation': 'webkitAnimationEnd'\n  };\n\n  for (t in animations) {\n    if (el.style[t] !== undefined) {\n      return animations[t];\n    }\n  }\n};\n\nexport function whichTransitionEvent() {\n  let t,\n      el = document.createElement('fakeelement');\n\n  let transitions = {\n    'transition': 'transitionend',\n    'OTransition': 'oTransitionEnd',\n    'MozTransition': 'transitionend',\n    'WebkitTransition': 'webkitTransitionEnd'\n  };\n\n  for (t in transitions) {\n    if (el.style[t] !== undefined) {\n      return transitions[t];\n    }\n  }\n};\n\nexport function getRandom(min, max) {\n  return Math.random() * (max - min) + min;\n};\n\n/**\n * BreakpointListener\n * \n * Provide information when screen size changes from/to several breakpoints.\n * \n * @param {function} callback\n * @param {json} breakpoints\n */\nexport class BreakpointListener {\n  constructor(callback, breakpoints) {\n    this.screenSize = null;\n    this.windowWidth = window.innerWidth;\n    this.timeout = null;\n\n    this.checkView = () => {\n      let keys = Object.keys(breakpoints);\n\n      let screenSize = keys.slice(-1)[0];\n\n      for (let i=keys.length-1; i >= 0; i--) {\n        let value = breakpoints[keys[i]];\n        if (this.windowWidth < value) {\n          screenSize = keys[i-1] || 'xs';\n        }\n      }\n\n      let hasChanged = this.screenSize !== screenSize;\n\n      this.screenSize = screenSize;\n\n      callback({\n        screenSize: this.screenSize,\n        hasChanged: hasChanged\n      });\n    };\n\n    this.listener = () => {\n      if (this.windowWidth !== window.innerWidth) {\n        this.windowWidth = window.innerWidth;\n    \n        if (this.timeout) {\n          clearTimeout(this.timeout);\n        }\n    \n        this.timeout = setTimeout(this.checkView, 250);\n      }\n    };\n  \n    window.addEventListener('resize', this.listener);\n\n    this.checkView();\n  }\n};\n\nexport class Timer {\n  constructor(callback, delay) {\n    let timerId, start, remaining = delay;\n\n    this.pause = function () {\n      window.clearTimeout(timerId);\n      remaining -= new Date() - start;\n    };\n\n    let resume = function () {\n      start = new Date();\n      timerId = window.setTimeout(function () {\n        remaining = delay;\n        resume();\n        callback();\n      }, remaining);\n    };\n    this.resume = resume;\n\n    this.reset = function () {\n      remaining = delay;\n    };\n\n    this.resume();\n  }\n};\n"]}